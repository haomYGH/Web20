{
	"alert": "function alert() {var msg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';var icon = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'none';var url = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';var openType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'navigate';\n  /*消息强制转字符串*/\n  if (typeof msg != 'string') {\n    msg = msg.toString();\n  }\n\n  if (msg.length > 7) {\n    //长度超过7个字符，用示模态弹窗展示\n    uni.showModal({\n      title: '提示',\n      content: msg,\n      showCancel: false });\n\n  } else {\n    if (icon == 'warning') {\n      uni.showToast({\n        title: msg,\n        image: \"/static/images/icon-warning.png\" });\n\n    } else {\n      uni.showToast({\n        title: msg,\n        icon: icon });\n\n    }\n  }\n  if (url || openType == 'back') {\n    setTimeout(function () {\n      if (openType == 'redirect') {\n        uni.redirectTo({\n          url: url });\n\n      } else if (openType == 'switchTab') {\n        uni.switchTab({\n          url: url });\n\n      } else if (openType == 'reLaunch') {\n        uni.reLaunch({\n          url: url });\n\n      } else if (openType == 'back') {\n        uni.navigateBack();\n      } else {\n        uni.navigateTo({\n          url: url });\n\n      }\n    }, 1500);\n  }\n}",
	"bindMobile": "function bindMobile() {\n  uni.navigateTo({\n    url: '/pages/user/bindMobile' });\n\n}",
	"checkAuth": "function checkAuth() {\n  request({\n    url: _api.default.user.checkAuth,\n    data: {},\n    method: 'POST',\n    dataType: 'json',\n    success: function success(res) {\n      __f__(\"log\", 'has auth', \" at common/app.js:209\");\n    } });\n\n}",
	"getNaviBarHeight": "function getNaviBarHeight() {\n  var height = '90rpx';\n\n\n\n\n\n\n\n\n\n\n\n\n\n  __f__(\"log\", height, \" at common/app.js:479\");\n  return height;\n}",
	"getPlatform": "function getPlatform() {\n  var platform = uni.getStorageSync('platform');\n\n\n\n\n\n\n  if (!platform) {\n    platform = 'h5'; //H5\n  }\n\n\n\n\n\n\n\n\n\n\n  return platform;\n}",
	"getSourcePage": "function getSourcePage() {\n  var pages = getCurrentPages();\n  __f__(\"log\", pages, \" at common/app.js:224\");\n  if (pages.length >= 2) {\n    var currentPage = pages[pages.length - 2];\n    var originUrl = '/' + currentPage.route;\n    __f__(\"log\", 'source:' + originUrl, \" at common/app.js:228\");\n    return originUrl;\n  } else {\n    __f__(\"log\", 'source:' + 'no', \" at common/app.js:231\");\n    return '';\n  }\n\n}",
	"initLogin": "function initLogin() {\n  if (!isLogin()) {\n    login();\n  }\n}",
	"initMPLogin": "function initMPLogin() {\n  /*获取登录验证url*/\n  var url = location.href.split('/pages/');\n  var loginUrl = '';\n  if (url.length > 1) {\n    loginUrl = url[0] + '/pages/wechat/mpLogin';\n  } else {\n    loginUrl = url[0] + 'pages/wechat/mpLogin';\n  }\n\n  /*获取分享id*/\n  var share_user_id = uni.getStorageSync('share_user_id');\n  share_user_id = share_user_id > 0 ? share_user_id : 0;\n\n  /*拼装url*/\n  location.href = _api.default.wechat.mpLogin + '?url=' + encodeURIComponent(loginUrl) + '&share_user_id=' + share_user_id;\n}",
	"isLogin": "function isLogin() {\n  if (uni.getStorageSync(\"isLogin\") == \"1\") {\n    return true;\n  }\n  return false;\n}",
	"isWechat": "function isWechat() {\n\n\n\n\n\n  var ua = window.navigator.userAgent.toLowerCase();\n  if (ua.match(/micromessenger/i) == 'micromessenger') {\n    return true;\n  } else {\n    return false;\n  }\n\n}",
	"loading": "function loading() {var msg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';var mask = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  /*消息强制转字符串*/\n  if (typeof msg != 'string') {\n    msg = msg.toString();\n  }\n  uni.showLoading({\n    title: msg,\n    mask: mask });\n\n}",
	"login": "function login() {\n  /*清除登录缓存*/\n  uni.removeStorageSync('isLogin');\n  uni.removeStorageSync('accessToken');\n  uni.removeStorageSync('currentUser');\n  uni.removeStorageSync('platform');\n\n  __f__(\"log\", '跳转登录', \" at common/app.js:49\");\n\n  /*储存当前页*/\n  var pages = getCurrentPages();\n  var currentPage = pages[pages.length - 1];\n  var originUrl = '/' + currentPage.route;\n\n\n  var urlParam = objectToUrlParams(currentPage.$route.query);\n  if (urlParam) {\n    originUrl = originUrl + '?' + urlParam;\n  }\n\n\n  uni.setStorageSync('loginOriginUrl', originUrl); //存储跳转前URL\n  __f__(\"log\", 'loginOriginUrl:' + originUrl, \" at common/app.js:64\");\n\n\n\n\n\n\n\n\n  if (getPlatform() == 'wechatMP') {\n    initMPLogin(); //公众号登录\n  } else {\n    uni.navigateTo({\n      url: '/pages/common/login' });\n\n  }\n\n}",
	"request": "function request(req) {\n  var accessToken = uni.getStorageSync(\"accessToken\");\n  var platform = getPlatform();\n  var header = {\n    'platform': platform,\n    'token': accessToken,\n    'Content-type': 'application/x-www-form-urlencoded' };\n\n  if (req.header) {\n    header = Object.assign(header, req.header);\n  }\n  uni.request({\n    url: req.url,\n    data: req.data || {},\n    header: header,\n    method: req.method || \"GET\",\n    dataType: req.dataType || \"json\",\n    success: function success(res) {\n      if (res.data.code == '1000') {\n        login(); //登录\n      } else if (res.data.code == '1003') {\n        bindMobile(); //绑定手机号码\n      } else {\n        if (req.success) {\n          __f__(\"log\", res, \" at common/app.js:266\");\n          req.success(res.data);\n        }\n      }\n    },\n    fail: function fail(res) {\n      __f__(\"warn\", '--- request fail >>>', \" at common/app.js:272\");\n      __f__(\"warn\", res, \" at common/app.js:273\");\n      __f__(\"warn\", '<<< request fail ---', \" at common/app.js:274\");\n      uni.showToast({\n        title: '网络异常~',\n        icon: 'none' });\n\n      if (req.fail) {\n        req.fail(res);\n      }\n    },\n    complete: function complete(res) {\n      if (res.statusCode != 200) {\n        if (res.code == '1000') {\n          login();\n        }\n        __f__(\"log\", '--- request http error >>>', \" at common/app.js:288\");\n        __f__(\"log\", res.statusCode, \" at common/app.js:289\");\n        __f__(\"log\", res.data, \" at common/app.js:290\");\n        __f__(\"log\", '<<< request http error ---', \" at common/app.js:291\");\n      }\n      if (req.complete) {\n        req.complete(res);\n      }\n    } });\n\n}",
	"tabBarUrl": {
		"0": "/pages/article/index",
		"1": "/pages/user/favorites",
		"2": "/pages/user/index",
		"length": 3
	},
	"uploadFile": "function uploadFile(req) {\n  var accessToken = uni.getStorageSync(\"accessToken\");\n  var platform = getPlatform();\n  var header = {\n    'platform': platform,\n    'token': accessToken };\n\n  if (req.header) {\n    header = Object.assign(header, req.header);\n  }\n  __f__(\"log\", header, \" at common/app.js:311\");\n  uni.uploadFile({\n    url: req.url,\n    filePath: req.filePath,\n    header: header,\n    name: req.name || 'file',\n    formData: req.formData || {},\n    success: function success(res) {\n      if (res.data.code == '1000') {\n        login(); //登录\n      } else if (res.data.code == '1003') {\n        bindMobile(); //绑定手机号码\n      } else {\n        if (req.success) {\n          req.success(JSON.parse(res.data));\n        }\n      }\n    },\n    fail: function fail(res) {\n      __f__(\"warn\", '--- request fail >>>', \" at common/app.js:330\");\n      __f__(\"warn\", res, \" at common/app.js:331\");\n      __f__(\"warn\", '<<< request fail ---', \" at common/app.js:332\");\n      uni.showToast({\n        title: '网络异常~',\n        icon: 'none' });\n\n      if (req.fail) {\n        req.fail(res);\n      }\n    },\n    complete: function complete(res) {\n      if (res.statusCode != 200) {\n        if (res.code == '1000') {\n          login();\n        }\n        __f__(\"log\", '--- request http error >>>', \" at common/app.js:346\");\n        __f__(\"log\", res.statusCode, \" at common/app.js:347\");\n        __f__(\"log\", res.data, \" at common/app.js:348\");\n        __f__(\"log\", '<<< request http error ---', \" at common/app.js:349\");\n      }\n      if (req.complete) {\n        req.complete(res);\n      }\n    } });\n\n}",
	"wechatAppLogin": "function wechatAppLogin() {var isBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  /*登录提示*/\n  uni.showLoading({\n    title: \"正在登录\",\n    mask: true });\n\n\n  /*微信登录*/\n  uni.login({\n    provider: 'weixin',\n    success: function success(loginResult) {\n      var code = loginResult.code;\n      __f__(\"log\", loginResult, \" at common/app.js:113\");\n      /*获取用户信息*/\n      uni.getUserInfo({\n        success: function success(result) {\n          /*获取分享id*/\n          var share_user_id = uni.getStorageSync('share_user_id');\n          share_user_id = share_user_id > 0 ? share_user_id : 0;\n\n          /*登录验证*/\n          request({\n            url: _api.default.wechat.miniAppLogin,\n            data: {\n              share_user_id: share_user_id,\n              code: code,\n              user_info: result.rawData,\n              encrypted_data: result.encryptedData,\n              iv: result.iv,\n              signature: result.signature },\n\n            method: 'POST',\n            dataType: 'json',\n            success: function success(res) {\n              __f__(\"log\", res, \" at common/app.js:135\");\n              if (res.code == 0) {\n                alert('登录成功', 'success');\n\n                /*更新登录状态,保存用户数据*/\n                var userInfo = res.data;\n                uni.setStorageSync(\"isLogin\", '1');\n                uni.setStorageSync(\"accessToken\", userInfo.token);\n                uni.setStorageSync('currentUser', userInfo);\n                uni.setStorageSync('platform', 'wechatMiniApp');\n                uni.setStorageSync('source', 'login');\n                if (userInfo.is_exist_user == 0) {\n                  uni.setStorageSync('register', 1);\n                }\n\n                /*switchTab刷新*/\n                var originUrl = uni.getStorageSync('loginOriginUrl');\n                if (originUrl) {\n                  var originUrlRoute = originUrl.split('?');\n                  __f__(\"log\", 'originUrlRoute:' + originUrlRoute, \" at common/app.js:154\");\n                  if (tabBarUrl.includes(originUrlRoute[0])) {\n                    uni.switchTab({\n                      url: originUrlRoute[0] });\n\n                  } else {\n                    uni.navigateBack();\n                  }\n                } else {\n                  /*登录后跳转*/\n                  if (isBack) {\n                    uni.navigateBack();\n                  }\n                }\n              } else {\n                alert(res.msg, 'warning');\n              }\n            } });\n\n        },\n        fail: function fail(result) {\n          uni.hideLoading();\n        } });\n\n    } });\n\n}"
}
